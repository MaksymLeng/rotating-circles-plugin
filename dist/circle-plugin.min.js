var d=class{constructor(t,e=[],s={}){this.container=document.getElementById(t),this.books=e,this.config={radius:s.radius||150,speed:s.speed||.01,mode:s.mode||"circular",maxFps:s.maxFps||60,randomSpeedRange:s.randomSpeedRange||[.5,2]},this.parentAngle=0,this.isPaused=!1,this.circlesData=[],this.lastFrameTime=0,this.config.mode==="random"&&this.container.classList.add("random-mode"),this.init()}init(){this.books.forEach(t=>this.addBookCircle(t)),this.animate()}addBook(t){this.books.push(t),this.addBookCircle(t)}addBookCircle(t){let e=document.createElement("div");e.classList.add("book-circle",t.status);let s=t.status==="read"?"\u2705":t.status==="reading"?"\u{1F4D6}":"\u{1F4CC}";e.innerHTML=`
            <div class="book-content">
                <span class="book-icon">${s}</span>
                <span class="book-title">${t.title[0].toUpperCase()}</span>
                <div class="book-details">
                    <p>Autor: ${t.author}</p>
                    <p>Title: ${t.title}</p>
                    <p>Genre: ${t.genre||"_"}</p>
                </div>
            </div>
        `,e.addEventListener("click",()=>{e.classList.toggle("expanded"),this.isPaused=!!this.container.querySelector(".book-circle.expanded")}),document.addEventListener("click",i=>{i.target.closest(".book-circle")||(this.isPaused=!1,e.classList.remove("expanded"),this.container.querySelectorAll(".book-circle.expanded").forEach(n=>{n.classList.remove("expanded")}))}),this.container.appendChild(e),this.config.mode==="random"&&this.initRandomData(),this.updatePositions()}updatePositions(){this.config.mode==="circular"?this.updateCircularPosition():this.updateRandomPosition()}setMode(t){this.config.mode=t,t==="random"?(this.container.classList.add("random-mode"),this.initRandomData()):this.container.classList.remove("random-mode"),this.updatePositions()}updateCircularPosition(){let t=this.container.querySelectorAll(".book-circle"),e=t.length,s=this.config.radius;t.forEach((i,a)=>{let o=2*Math.PI/e*a+this.parentAngle,c=200,r=200,h=c+s*Math.cos(o),m=r+s*Math.sin(o);i.style.left=`${h}px`,i.style.top=`${m}px`;let l=i.querySelector(".book-content"),p=o*180/Math.PI;i.classList.contains("expanded")?l.style.transform="rotate(0deg)":l.style.transform=`rotate(${-p+180}deg)`})}initRandomData(){this.circlesData=[];let t=this.container.getBoundingClientRect();this.container.querySelectorAll(".book-circle").forEach(s=>{let i=Math.random()*t.width,a=Math.random()*t.height,[n,o]=this.config.randomSpeedRange,c=(Math.random()*(o-n)+n)*(Math.random()<.5?-1:1),r=(Math.random()*(o-n)+n)*(Math.random()<.5?-1:1);this.circlesData.push({element:s,x:i,y:a,vx:c,vy:r}),s.style.left=`${i}px`,s.style.top=`${a}px`})}updateRandomPosition(){let t=this.container.getBoundingClientRect();this.circlesData.forEach(e=>{this.isPaused||(e.x+=e.vx,e.y+=e.vy,e.x<0&&(e.x=0,e.vx*=-1),e.x>t.width&&(e.x=t.width,e.vx*=-1),e.y<0&&(e.y=0,e.vy*=-1),e.y>t.height&&(e.y=t.height,e.vy*=-1)),e.element.style.left=`${e.x}px`,e.element.style.top=`${e.y}px`})}animate(t){if(t-this.lastFrameTime<1e3/this.config.maxFps){requestAnimationFrame(this.animate.bind(this));return}this.lastFrameTime=t,this.config.mode==="circular"&&!this.isPaused&&(this.parentAngle+=this.config.speed),this.updatePositions(),requestAnimationFrame(this.animate.bind(this))}};export{d as default};
